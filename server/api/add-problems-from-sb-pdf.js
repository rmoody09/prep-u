import { serverSupabaseServiceRole } from '#supabase/server'
import Anthropic from "@anthropic-ai/sdk";

const sample_json = `[{"test_section":"math","question_id":"feea2bbd","domain":"advanced_math","skill":"nonlinear_functions","question_text":"[img]The graph of the exponential function $latex_startf$latex_end is shown, where $latex_starty=f(x)$latex_end. The y-intercept of the graph is $latex_start(0,y)$latex_end. What is the value of $latex_starty$latex_end? \n","question_html":"<img src=\"https://hxosbmzvobqvyncpnxqt.supabase.co/storage/v1/object/public/Problem%20Graphics/CollegeBoard%20Question%20Bank%20Graphics/question_feea2bbd_graphic.png\" style=\"width: 239px; height: auto; cursor: pointer;\" draggable=\"true\"><p>The graph of the exponential function <math-component latex=\"f\"></math-component> is shown, where <math-component latex=\"y=f(x)\"></math-component>. The <em>y</em>-intercept of the graph is <math-component latex=\"(0,y)\"></math-component>. What is the value of <math-component latex=\"y\"></math-component>?&nbsp;</p>","question_json":{"type":"doc","content":[{"type":"image","attrs":{"id":null,"alt":null,"src":"https://hxosbmzvobqvyncpnxqt.supabase.co/storage/v1/object/public/Problem%20Graphics/CollegeBoard%20Question%20Bank%20Graphics/question_feea2bbd_graphic.png","name":null,"class":null,"ismap":null,"sizes":null,"style":"width: 239px; height: auto; cursor: pointer;","title":null,"width":null,"height":null,"srcset":null,"usemap":null,"loading":null,"decoding":null,"longdesc":null,"tabindex":null,"draggable":true,"aria-label":null,"crossorigin":null,"referrerpolicy":null,"aria-labelledby":null,"aria-describedby":null}},{"type":"paragraph","content":[{"text":"The graph of the exponential function ","type":"text"},{"type":"mathComponent","attrs":{"latex":"f"}},{"text":" is shown, where ","type":"text"},{"type":"mathComponent","attrs":{"latex":"y=f(x)"}},{"text":". The ","type":"text"},{"text":"y","type":"text","marks":[{"type":"italic"}]},{"text":"-intercept of the graph is ","type":"text"},{"type":"mathComponent","attrs":{"latex":"(0,y)"}},{"text":". What is the value of ","type":"text"},{"type":"mathComponent","attrs":{"latex":"y"}},{"text":"? ","type":"text"}]}]},"answer_type":"numeric_input","answer_choices":[],"mult_choice_answer":null,"input_answer":"3","difficulty":1,"contains_graphic":true,"solution":{"html":"<p>The correct answer is 3. It's given that the <em>y</em>-intercept of the graph shown is <math-component latex=\"(0,y)\"></math-component>. The graph passes through the point (0,3). Therefore, the value of <math-component latex=\"y\"></math-component> is 3.&nbsp;</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"The correct answer is 3. It's given that the ","type":"text"},{"text":"y","type":"text","marks":[{"type":"italic"}]},{"text":"-intercept of the graph shown is ","type":"text"},{"type":"mathComponent","attrs":{"latex":"(0,y)"}},{"text":". The graph passes through the point (0,3). Therefore, the value of ","type":"text"},{"type":"mathComponent","attrs":{"latex":"y"}},{"text":" is 3. ","type":"text"}]}]}}},{"test_section":"math","question_id":"3cc991d1","domain":"algebra","skill":"linear_equations_in_one_variable","question_text":"On the first day of a semester, a film club has 90 members. Each day after the first day of the semester, 10 new members join the film club. If no members leave the film club, how many total members will the film club have 4 days after the first day of the semester? \n","question_html":"<p>On the first day of a semester, a film club has <strong>90</strong> members. Each day after the first day of the semester, <strong>10</strong> new members join the film club. If no members leave the film club, how many total members will the film club have <strong>4</strong> days after the first day of the semester?&nbsp;</p>","question_json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"On the first day of a semester, a film club has ","type":"text"},{"text":"90","type":"text","marks":[{"type":"bold"}]},{"text":" members. Each day after the first day of the semester, ","type":"text"},{"text":"10","type":"text","marks":[{"type":"bold"}]},{"text":" new members join the film club. If no members leave the film club, how many total members will the film club have ","type":"text"},{"text":"4","type":"text","marks":[{"type":"bold"}]},{"text":" days after the first day of the semester? ","type":"text"}]}]},"answer_type":"multiple_choice","answer_choices":[{"html":"<p>400</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"400","type":"text"}]}]}},{"html":"<p>130</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"130","type":"text"}]}]}},{"html":"<p>94</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"94","type":"text"}]}]}},{"html":"<p>90</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"90","type":"text"}]}]}}],"mult_choice_answer":1,"input_answer":null,"difficulty":1,"contains_graphic":false,"solution":{"html":"<p>Choice B is correct. It’s given that the film club has <strong>90</strong> members on the first day of a semester, and <strong>10</strong> new members join the film club each day after the first day of the semester. This means that after <strong>4</strong> days, <math-component latex=\"4\\times10\"></math-component>, or <strong>40</strong>, new members will have joined the club. Adding <strong>40</strong> members to the original <strong>90</strong> club members yields <strong>130</strong> members. Thus, the film club will have <strong>130</strong> total members <strong>4</strong> days after the first day of the semester. </p><p></p><p>Choice A is incorrect. This is the number of members that will have joined the film club <strong>4</strong> days after the first day of the semester if <strong>100</strong> new members, not <strong>10</strong>, join the film club each day. </p><p></p><p>Choice C is incorrect. This is the number of members the film club will have <strong>4</strong> days after the first day of the semester if 1 new member, not <strong>10</strong>, joins the film club each day. </p><p></p><p>Choice D is incorrect. This is the number of members the film club has on the first day of the semester.&nbsp;</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"Choice B is correct. It’s given that the film club has ","type":"text"},{"text":"90","type":"text","marks":[{"type":"bold"}]},{"text":" members on the first day of a semester, and ","type":"text"},{"text":"10","type":"text","marks":[{"type":"bold"}]},{"text":" new members join the film club each day after the first day of the semester. This means that after ","type":"text"},{"text":"4","type":"text","marks":[{"type":"bold"}]},{"text":" days, ","type":"text"},{"type":"mathComponent","attrs":{"latex":"4\\times10"}},{"text":", or ","type":"text"},{"text":"40","type":"text","marks":[{"type":"bold"}]},{"text":", new members will have joined the club. Adding ","type":"text"},{"text":"40","type":"text","marks":[{"type":"bold"}]},{"text":" members to the original ","type":"text"},{"text":"90","type":"text","marks":[{"type":"bold"}]},{"text":" club members yields ","type":"text"},{"text":"130","type":"text","marks":[{"type":"bold"}]},{"text":" members. Thus, the film club will have ","type":"text"},{"text":"130","type":"text","marks":[{"type":"bold"}]},{"text":" total members ","type":"text"},{"text":"4","type":"text","marks":[{"type":"bold"}]},{"text":" days after the first day of the semester. ","type":"text"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"text":"Choice A is incorrect. This is the number of members that will have joined the film club ","type":"text"},{"text":"4","type":"text","marks":[{"type":"bold"}]},{"text":" days after the first day of the semester if ","type":"text"},{"text":"100","type":"text","marks":[{"type":"bold"}]},{"text":" new members, not ","type":"text"},{"text":"10","type":"text","marks":[{"type":"bold"}]},{"text":", join the film club each day. ","type":"text"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"text":"Choice C is incorrect. This is the number of members the film club will have ","type":"text"},{"text":"4","type":"text","marks":[{"type":"bold"}]},{"text":" days after the first day of the semester if 1 new member, not ","type":"text"},{"text":"10","type":"text","marks":[{"type":"bold"}]},{"text":", joins the film club each day. ","type":"text"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"text":"Choice D is incorrect. This is the number of members the film club has on the first day of the semester. ","type":"text"}]}]}}},{"test_section":"math","question_id":"005e9982","domain":"advanced_math","skill":"nonlinear_functions","question_text":"$latex_startf(x)=9,000\\left(0.66\\right)^{x}$latex_end\nThe given function $latex_startf$latex_end models the number of advertisements a company sent to its clients each year, where $latex_startx$latex_end represents the number of years since 1997, and $latex_start0\\le x\\le5$latex_end. If $latex_starty=f(x)$latex_end is graphed in the xy-plane, which of the following is the best interpretation of the y-intercept of the graph in this context? \n","question_html":"<p><math-component latex=\"f(x)=9,000\\left(0.66\\right)^{x}\"></math-component></p><p>The given function <math-component latex=\"f\"></math-component> models the number of advertisements a company sent to its clients each year, where <math-component latex=\"x\"></math-component> represents the number of years since 1997, and <math-component latex=\"0\\le x\\le5\"></math-component>. If <math-component latex=\"y=f(x)\"></math-component> is graphed in the <em>xy</em>-plane, which of the following is the best interpretation of the <em>y</em>-intercept of the graph in this context?&nbsp;</p>","question_json":{"type":"doc","content":[{"type":"paragraph","content":[{"type":"mathComponent","attrs":{"latex":"f(x)=9,000\\left(0.66\\right)^{x}"}}]},{"type":"paragraph","content":[{"text":"The given function ","type":"text"},{"type":"mathComponent","attrs":{"latex":"f"}},{"text":" models the number of advertisements a company sent to its clients each year, where ","type":"text"},{"type":"mathComponent","attrs":{"latex":"x"}},{"text":" represents the number of years since 1997, and ","type":"text"},{"type":"mathComponent","attrs":{"latex":"0\\le x\\le5"}},{"text":". If ","type":"text"},{"type":"mathComponent","attrs":{"latex":"y=f(x)"}},{"text":" is graphed in the ","type":"text"},{"text":"xy","type":"text","marks":[{"type":"italic"}]},{"text":"-plane, which of the following is the best interpretation of the ","type":"text"},{"text":"y","type":"text","marks":[{"type":"italic"}]},{"text":"-intercept of the graph in this context? ","type":"text"}]}]},"answer_type":"multiple_choice","answer_choices":[{"html":"<p>The minimum estimated number of advertisements the company sent to its clients during the 5 years was 1,708.&nbsp;</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"The minimum estimated number of advertisements the company sent to its clients during the 5 years was 1,708. ","type":"text"}]}]}},{"html":"<p>The minimum estimated number of advertisements the company sent to its clients during the 5 years was 9,000.&nbsp;</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"The minimum estimated number of advertisements the company sent to its clients during the 5 years was 9,000. ","type":"text"}]}]}},{"html":"<p>The estimated number of advertisements the company sent to its clients in 1997 was 1,708.&nbsp;</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"The estimated number of advertisements the company sent to its clients in 1997 was 1,708. ","type":"text"}]}]}},{"html":"<p>The estimated number of advertisements the company sent to its clients in 1997 was 9,000.&nbsp;</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"The estimated number of advertisements the company sent to its clients in 1997 was 9,000. ","type":"text"}]}]}}],"mult_choice_answer":3,"input_answer":null,"difficulty":3,"contains_graphic":false,"solution":{"html":"<p>Choice D is correct. The <em>y</em>-intercept of a graph in the <em>xy</em>-plane is the point where x = 0. For the given function <math-component latex=\"f\"></math-component>, the <em>y</em>-intercept of the graph of <math-component latex=\"y=f(x)\"></math-component> in the <em>xy</em>-plane can be found by substituting 0 for <math-component latex=\"x\"></math-component> in the equation <math-component latex=\"y=9,000\\left(0.66\\right)^{x}\"></math-component>, which gives <math-component latex=\"y=9,000\\left(0.66\\right)^0\"></math-component>. This is equivalent to <math-component latex=\"y=9,000(1)\"></math-component>, or <math-component latex=\"y = 9,000\"></math-component>. Therefore, the <em>y</em>-intercept of the graph of <math-component latex=\"y=f(x)\"></math-component> is (0, 9,000). It’s given that the function <math-component latex=\"f\"></math-component> models the number of advertisements a company sent to its clients each year. Therefore, <math-component latex=\"f(x)\"></math-component> represents the estimated number of advertisements the company sent to its clients each year. It's also given that <math-component latex=\"x\"></math-component> represents the number of years since 1997. Therefore, <math-component latex=\"x=0\"></math-component> represents 0 years since 1997, or 1997. Thus, the best interpretation of the <em>y</em>-intercept of the graph <math-component latex=\"f=f(x)\"></math-component> of is that the estimated number of advertisements the company sent to its clients in 1997 was 9,000. </p><p></p><p>Choice A is incorrect and may result from conceptual or calculation errors. </p><p></p><p>Choice B is incorrect and may result from conceptual or calculation errors. </p><p></p><p>Choice C is incorrect and may result from conceptual or calculation errors.&nbsp;</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"Choice D is correct. The ","type":"text"},{"text":"y","type":"text","marks":[{"type":"italic"}]},{"text":"-intercept of a graph in the ","type":"text"},{"text":"xy","type":"text","marks":[{"type":"italic"}]},{"text":"-plane is the point where x = 0. For the given function ","type":"text"},{"type":"mathComponent","attrs":{"latex":"f"}},{"text":", the ","type":"text"},{"text":"y","type":"text","marks":[{"type":"italic"}]},{"text":"-intercept of the graph of ","type":"text"},{"type":"mathComponent","attrs":{"latex":"y=f(x)"}},{"text":" in the ","type":"text"},{"text":"xy","type":"text","marks":[{"type":"italic"}]},{"text":"-plane can be found by substituting 0 for ","type":"text"},{"type":"mathComponent","attrs":{"latex":"x"}},{"text":" in the equation ","type":"text"},{"type":"mathComponent","attrs":{"latex":"y=9,000\\left(0.66\\right)^{x}"}},{"text":", which gives ","type":"text"},{"type":"mathComponent","attrs":{"latex":"y=9,000\\left(0.66\\right)^0"}},{"text":". This is equivalent to ","type":"text"},{"type":"mathComponent","attrs":{"latex":"y=9,000(1)"}},{"text":", or ","type":"text"},{"type":"mathComponent","attrs":{"latex":"y = 9,000"}},{"text":". Therefore, the ","type":"text"},{"text":"y","type":"text","marks":[{"type":"italic"}]},{"text":"-intercept of the graph of ","type":"text"},{"type":"mathComponent","attrs":{"latex":"y=f(x)"}},{"text":" is (0, 9,000). It’s given that the function ","type":"text"},{"type":"mathComponent","attrs":{"latex":"f"}},{"text":" models the number of advertisements a company sent to its clients each year. Therefore, ","type":"text"},{"type":"mathComponent","attrs":{"latex":"f(x)"}},{"text":" represents the estimated number of advertisements the company sent to its clients each year. It's also given that ","type":"text"},{"type":"mathComponent","attrs":{"latex":"x"}},{"text":" represents the number of years since 1997. Therefore, ","type":"text"},{"type":"mathComponent","attrs":{"latex":"x=0"}},{"text":" represents 0 years since 1997, or 1997. Thus, the best interpretation of the ","type":"text"},{"text":"y","type":"text","marks":[{"type":"italic"}]},{"text":"-intercept of the graph ","type":"text"},{"type":"mathComponent","attrs":{"latex":"f=f(x)"}},{"text":" of is that the estimated number of advertisements the company sent to its clients in 1997 was 9,000. ","type":"text"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"text":"Choice A is incorrect and may result from conceptual or calculation errors. ","type":"text"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"text":"Choice B is incorrect and may result from conceptual or calculation errors. ","type":"text"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"text":"Choice C is incorrect and may result from conceptual or calculation errors. ","type":"text"}]}]}}},{"test_section":"math","question_id":"6dc8c2cd","domain":"algebra","skill":"linear_inequalities_in_one_or_two_variables","question_text":"For a party, 50 dinner rolls are needed. Dinner rolls are sold in packages of 12. What is the minimum number of packages that should be bought for the party? \n","question_html":"<p>For a party, 50 dinner rolls are needed. Dinner rolls are sold in packages of 12. What is the minimum number of packages that should be bought for the party?&nbsp;</p>","question_json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"For a party, 50 dinner rolls are needed. Dinner rolls are sold in packages of 12. What is the minimum number of packages that should be bought for the party? ","type":"text"}]}]},"answer_type":"numeric_input","answer_choices":[],"mult_choice_answer":null,"input_answer":"5","difficulty":1,"contains_graphic":false,"solution":{"html":"<p>The correct answer is 5. Let <math-component latex=\"p\"></math-component> represent the number of packages of dinner rolls that should be bought for the party. It's given that dinner rolls are sold in packages of 12. Therefore, <math-component latex=\"12p\"></math-component> represents the number of dinner rolls that should be bought for the party. It's also given that 50 dinner rolls are needed; therefore, <math-component latex=\"12p\\leq50\"></math-component>. Dividing both sides of this inequality by 12 yields <math-component latex=\"12p\\leq\\frac{50}{12}\"></math-component>, or approximately <math-component latex=\"p\\leq4.17\"></math-component>. Since the number of packages of dinner rolls must be a whole number, the minimum number of packages that should be bought for the party is 5.&nbsp;</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"The correct answer is 5. Let ","type":"text"},{"type":"mathComponent","attrs":{"latex":"p"}},{"text":" represent the number of packages of dinner rolls that should be bought for the party. It's given that dinner rolls are sold in packages of 12. Therefore, ","type":"text"},{"type":"mathComponent","attrs":{"latex":"12p"}},{"text":" represents the number of dinner rolls that should be bought for the party. It's also given that 50 dinner rolls are needed; therefore, ","type":"text"},{"type":"mathComponent","attrs":{"latex":"12p\\leq50"}},{"text":". Dividing both sides of this inequality by 12 yields ","type":"text"},{"type":"mathComponent","attrs":{"latex":"12p\\leq\\frac{50}{12}"}},{"text":", or approximately ","type":"text"},{"type":"mathComponent","attrs":{"latex":"p\\leq4.17"}},{"text":". Since the number of packages of dinner rolls must be a whole number, the minimum number of packages that should be bought for the party is 5. ","type":"text"}]}]}}},{"test_section":"math","question_id":"ed5b7c61","domain":"advanced_math","skill":"nonlinear_functions","question_text":"$latex_startq(x)=32(2^x)$latex_end\nWhich table gives three values of $latex_startx$latex_end and their corresponding values of $latex_startq(x)$latex_end for function $latex_startq$latex_end? \n","question_html":"<p><math-component latex=\"q(x)=32(2^x)\"></math-component></p><p>Which table gives three values of <math-component latex=\"x\"></math-component> and their corresponding values of <math-component latex=\"q(x)\"></math-component> for function <math-component latex=\"q\"></math-component>?&nbsp;</p>","question_json":{"type":"doc","content":[{"type":"paragraph","content":[{"type":"mathComponent","attrs":{"latex":"q(x)=32(2^x)"}}]},{"type":"paragraph","content":[{"text":"Which table gives three values of ","type":"text"},{"type":"mathComponent","attrs":{"latex":"x"}},{"text":" and their corresponding values of ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q(x)"}},{"text":" for function ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q"}},{"text":"? ","type":"text"}]}]},"answer_type":"multiple_choice","answer_choices":[{"html":"<table style=\"min-width: 100px\"><colgroup><col><col><col><col></colgroup><tbody><tr><td colspan=\"1\" rowspan=\"1\"><p>x</p></td><td colspan=\"1\" rowspan=\"1\"><p>-1</p></td><td colspan=\"1\" rowspan=\"1\"><p>0</p></td><td colspan=\"1\" rowspan=\"1\"><p>1</p></td></tr><tr><td colspan=\"1\" rowspan=\"1\"><p>q(x)</p></td><td colspan=\"1\" rowspan=\"1\"><p>-64</p></td><td colspan=\"1\" rowspan=\"1\"><p>0</p></td><td colspan=\"1\" rowspan=\"1\"><p>64</p></td></tr></tbody></table>","json":{"type":"doc","content":[{"type":"table","content":[{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"x","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"-1","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"0","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"1","type":"text"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"q(x)","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"-64","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"0","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"64","type":"text"}]}]}]}]}]}},{"html":"<p></p><table style=\"min-width: 100px\"><colgroup><col><col><col><col></colgroup><tbody><tr><td colspan=\"1\" rowspan=\"1\"><p>x</p></td><td colspan=\"1\" rowspan=\"1\"><p>-1</p></td><td colspan=\"1\" rowspan=\"1\"><p>0</p></td><td colspan=\"1\" rowspan=\"1\"><p>1</p></td></tr><tr><td colspan=\"1\" rowspan=\"1\"><p>q(x)</p></td><td colspan=\"1\" rowspan=\"1\"><p><math-component latex=\"\\frac{1}{16}\"></math-component></p></td><td colspan=\"1\" rowspan=\"1\"><p>2</p></td><td colspan=\"1\" rowspan=\"1\"><p>64</p></td></tr></tbody></table>","json":{"type":"doc","content":[{"type":"paragraph"},{"type":"table","content":[{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"x","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"-1","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"0","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"1","type":"text"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"q(x)","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"type":"mathComponent","attrs":{"latex":"\\frac{1}{16}"}}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"2","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"64","type":"text"}]}]}]}]}]}},{"html":"<p></p><table style=\"min-width: 100px\"><colgroup><col><col><col><col></colgroup><tbody><tr><td colspan=\"1\" rowspan=\"1\"><p>x</p></td><td colspan=\"1\" rowspan=\"1\"><p>-1</p></td><td colspan=\"1\" rowspan=\"1\"><p>0</p></td><td colspan=\"1\" rowspan=\"1\"><p>1</p></td></tr><tr><td colspan=\"1\" rowspan=\"1\"><p>q(x)</p></td><td colspan=\"1\" rowspan=\"1\"><p><math-component latex=\"\\frac{1}{16}\"></math-component></p></td><td colspan=\"1\" rowspan=\"1\"><p>32</p></td><td colspan=\"1\" rowspan=\"1\"><p>64</p></td></tr></tbody></table>","json":{"type":"doc","content":[{"type":"paragraph"},{"type":"table","content":[{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"x","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"-1","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"0","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"1","type":"text"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"q(x)","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"type":"mathComponent","attrs":{"latex":"\\frac{1}{16}"}}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"32","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"64","type":"text"}]}]}]}]}]}},{"html":"<p></p><table style=\"min-width: 100px\"><colgroup><col><col><col><col></colgroup><tbody><tr><td colspan=\"1\" rowspan=\"1\"><p>x</p></td><td colspan=\"1\" rowspan=\"1\"><p>-1</p></td><td colspan=\"1\" rowspan=\"1\"><p>0</p></td><td colspan=\"1\" rowspan=\"1\"><p>1</p></td></tr><tr><td colspan=\"1\" rowspan=\"1\"><p>q(x)</p></td><td colspan=\"1\" rowspan=\"1\"><p>16</p></td><td colspan=\"1\" rowspan=\"1\"><p>32</p></td><td colspan=\"1\" rowspan=\"1\"><p>64</p></td></tr></tbody></table>","json":{"type":"doc","content":[{"type":"paragraph"},{"type":"table","content":[{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"x","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"-1","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"0","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"1","type":"text"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"q(x)","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"16","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"32","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"64","type":"text"}]}]}]}]}]}}],"mult_choice_answer":3,"input_answer":null,"difficulty":2,"contains_graphic":false,"solution":{"html":"<p>Choice D is correct. Substituting -1 for <math-component latex=\"x\"></math-component> in the given function yields <math-component latex=\"q\\left(-1\\right)=32\\left(2\\right)^{-1}\"></math-component>, which is equivalent to <math-component latex=\"q(-1)=32(\\frac{1}{2})\"></math-component>, or <math-component latex=\"q(-1)=16\"></math-component>. Therefore, when <math-component latex=\"x=-1\"></math-component>, the corresponding value of <math-component latex=\"q(x)\"></math-component> for function <math-component latex=\"q\"></math-component> is 16. Substituting 0 for <math-component latex=\"x\"></math-component> in the given function yields <math-component latex=\"q(0)=32(2)^0\"></math-component>, which is equivalent to <math-component latex=\"q(0)=32(1)\"></math-component>, or <math-component latex=\"q(0)=32\"></math-component>. Therefore, when <math-component latex=\"x=0\"></math-component> , the corresponding value of <math-component latex=\"q(x)\"></math-component> for function <math-component latex=\"q\"></math-component> is 32. Substituting 1 for <math-component latex=\"x\"></math-component> in the given function yields <math-component latex=\"q(1)=32(2)^1\"></math-component>, which is equivalent to <math-component latex=\"q(1) = 32(2)\"></math-component>, or <math-component latex=\"q(1)=64\"></math-component>. Therefore, when <math-component latex=\"x=1\"></math-component>, the corresponding value of <math-component latex=\"q(x)\"></math-component> for function <math-component latex=\"q\"></math-component> is 64. Of the choices given, only the table in choice D gives these three values of <math-component latex=\"x\"></math-component> and their corresponding values of <math-component latex=\"q(x)\"></math-component> for function <math-component latex=\"q\"></math-component>. </p><p></p><p>Choice A is incorrect. This table gives three values of <math-component latex=\"x\"></math-component>and their corresponding values of <math-component latex=\"q(x)\"></math-component> for the function <math-component latex=\"q(x) = 32(2x)\"></math-component>. </p><p></p><p>Choice B is incorrect. This table gives three values of <math-component latex=\"x\"></math-component>and their corresponding values of <math-component latex=\"q(x)\"></math-component> for the function <math-component latex=\"q(x)=2(32)^x\"></math-component>. </p><p></p><p>Choice C is incorrect and may result from conceptual or calculation errors.&nbsp;</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"Choice D is correct. Substituting -1 for ","type":"text"},{"type":"mathComponent","attrs":{"latex":"x"}},{"text":" in the given function yields ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q\\left(-1\\right)=32\\left(2\\right)^{-1}"}},{"text":", which is equivalent to ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q(-1)=32(\\frac{1}{2})"}},{"text":", or ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q(-1)=16"}},{"text":". Therefore, when ","type":"text"},{"type":"mathComponent","attrs":{"latex":"x=-1"}},{"text":", the corresponding value of ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q(x)"}},{"text":" for function ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q"}},{"text":" is 16. Substituting 0 for ","type":"text"},{"type":"mathComponent","attrs":{"latex":"x"}},{"text":" in the given function yields ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q(0)=32(2)^0"}},{"text":", which is equivalent to ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q(0)=32(1)"}},{"text":", or ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q(0)=32"}},{"text":". Therefore, when ","type":"text"},{"type":"mathComponent","attrs":{"latex":"x=0"}},{"text":" , the corresponding value of ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q(x)"}},{"text":" for function ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q"}},{"text":" is 32. Substituting 1 for ","type":"text"},{"type":"mathComponent","attrs":{"latex":"x"}},{"text":" in the given function yields ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q(1)=32(2)^1"}},{"text":", which is equivalent to ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q(1) = 32(2)"}},{"text":", or ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q(1)=64"}},{"text":". Therefore, when ","type":"text"},{"type":"mathComponent","attrs":{"latex":"x=1"}},{"text":", the corresponding value of ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q(x)"}},{"text":" for function ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q"}},{"text":" is 64. Of the choices given, only the table in choice D gives these three values of ","type":"text"},{"type":"mathComponent","attrs":{"latex":"x"}},{"text":" and their corresponding values of ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q(x)"}},{"text":" for function ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q"}},{"text":". ","type":"text"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"text":"Choice A is incorrect. This table gives three values of ","type":"text"},{"type":"mathComponent","attrs":{"latex":"x"}},{"text":"and their corresponding values of ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q(x)"}},{"text":" for the function ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q(x) = 32(2x)"}},{"text":". ","type":"text"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"text":"Choice B is incorrect. This table gives three values of ","type":"text"},{"type":"mathComponent","attrs":{"latex":"x"}},{"text":"and their corresponding values of ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q(x)"}},{"text":" for the function ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q(x)=2(32)^x"}},{"text":". ","type":"text"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"text":"Choice C is incorrect and may result from conceptual or calculation errors. ","type":"text"}]}]}}},{"test_section":"math","question_id":"57e4b0b9","domain":"algebra","skill":"linear_inequalities_in_one_or_two_variables","question_text":"A model estimates that whales from the genus Eschrichtius travel 72 to 77 miles in the ocean each day during their migration. Based on this model, which inequality represents the estimated total number of\nmiles, x, a whale from the genus Eschrichtius could travel in 16 days of its migration?\n","question_html":"<p>A model estimates that whales from the genus <em>Eschrichtius </em>travel 72 to 77 miles in the ocean each day during their migration. Based on this model, which inequality represents the estimated total number of</p><p>miles, x, a whale from the genus <em>Eschrichtius </em>could travel in 16 days of its migration?</p>","question_json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"A model estimates that whales from the genus ","type":"text"},{"text":"Eschrichtius ","type":"text","marks":[{"type":"italic"}]},{"text":"travel 72 to 77 miles in the ocean each day during their migration. Based on this model, which inequality represents the estimated total number of","type":"text"}]},{"type":"paragraph","content":[{"text":"miles, x, a whale from the genus ","type":"text"},{"text":"Eschrichtius ","type":"text","marks":[{"type":"italic"}]},{"text":"could travel in 16 days of its migration?","type":"text"}]}]},"answer_type":"multiple_choice","answer_choices":[{"html":"<p><math-component latex=\"72+16\\leq x\\leq77+16\"></math-component></p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"type":"mathComponent","attrs":{"latex":"72+16\\leq x\\leq77+16"}}]}]}},{"html":"<p><math-component latex=\"\\left(72\\right)\\left(16\\right)\\leq x\\leq\\left(77\\right)\\left(16\\right)\"></math-component></p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"type":"mathComponent","attrs":{"latex":"\\left(72\\right)\\left(16\\right)\\leq x\\leq\\left(77\\right)\\left(16\\right)"}}]}]}},{"html":"<p><math-component latex=\"72\\leq16+x\\leq77\"></math-component></p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"type":"mathComponent","attrs":{"latex":"72\\leq16+x\\leq77"}}]}]}},{"html":"<p><math-component latex=\"72\\leq16x\\leq77\"></math-component></p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"type":"mathComponent","attrs":{"latex":"72\\leq16x\\leq77"}}]}]}}],"mult_choice_answer":1,"input_answer":null,"difficulty":2,"contains_graphic":false,"solution":{"html":"<p>Choice B is correct. It's given that the model estimates that whales from the genus <em>Eschrichtius </em>travel 72 to 77 miles in the ocean each day during their migration. If one of these whales travels 72 miles each day for 16 days, then the whale travels 72(16) miles total. If one of these whales 77 travels miles each day for 16 days, then the whale travels 77(16) miles total. Therefore, the model estimates that in 16 days of its migration, a whale from the genus <em>Eschrichtius </em>could</p><p>travel at least 72(16) and at most 77(16) miles total. Thus, the inequality <math-component latex=\"\\left(72\\right)\\left(16\\right)\\leq x\\leq\\left(77\\right)\\left(16\\right)\"></math-component> estimated total number of miles, <math-component latex=\"x\"></math-component> , a whale from the genus <em>Eschrichtius </em>could travel in 16 days of its migration.</p><p></p><p>Choice A is incorrect and may result from conceptual errors. </p><p></p><p>Choice C is incorrect and may result from conceptual errors. </p><p></p><p>Choice D is incorrect and may result from conceptual errors.</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"Choice B is correct. It's given that the model estimates that whales from the genus ","type":"text"},{"text":"Eschrichtius ","type":"text","marks":[{"type":"italic"}]},{"text":"travel 72 to 77 miles in the ocean each day during their migration. If one of these whales travels 72 miles each day for 16 days, then the whale travels 72(16) miles total. If one of these whales 77 travels miles each day for 16 days, then the whale travels 77(16) miles total. Therefore, the model estimates that in 16 days of its migration, a whale from the genus ","type":"text"},{"text":"Eschrichtius ","type":"text","marks":[{"type":"italic"}]},{"text":"could","type":"text"}]},{"type":"paragraph","content":[{"text":"travel at least 72(16) and at most 77(16) miles total. Thus, the inequality ","type":"text"},{"type":"mathComponent","attrs":{"latex":"\\left(72\\right)\\left(16\\right)\\leq x\\leq\\left(77\\right)\\left(16\\right)"}},{"text":" estimated total number of miles, ","type":"text"},{"type":"mathComponent","attrs":{"latex":"x"}},{"text":" , a whale from the genus ","type":"text"},{"text":"Eschrichtius ","type":"text","marks":[{"type":"italic"}]},{"text":"could travel in 16 days of its migration.","type":"text"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"text":"Choice A is incorrect and may result from conceptual errors. ","type":"text"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"text":"Choice C is incorrect and may result from conceptual errors. ","type":"text"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"text":"Choice D is incorrect and may result from conceptual errors.","type":"text"}]}]}}},{"test_section":"math","question_id":"a23c1142","domain":"algebra","skill":"linear_equations_in_one_variable","question_text":"8x = 88\n\nWhat value of x is the solution to the given equation?\n","question_html":"<p>8x = 88</p><p></p><p>What value of <strong>x</strong> is the solution to the given equation?</p>","question_json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"8x = 88","type":"text"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"text":"What value of ","type":"text"},{"text":"x","type":"text","marks":[{"type":"bold"}]},{"text":" is the solution to the given equation?","type":"text"}]}]},"answer_type":"multiple_choice","answer_choices":[{"html":"<p>11</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"11","type":"text"}]}]}},{"html":"<p>80</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"80","type":"text"}]}]}},{"html":"<p>96</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"96","type":"text"}]}]}},{"html":"<p>704</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"704","type":"text"}]}]}}],"mult_choice_answer":0,"input_answer":null,"difficulty":1,"contains_graphic":false,"solution":{"html":"<p>Choice A is correct. Dividing both sides of the given equation 8 by yields x - 11. Therefore, 11 is the solution to the given equation. </p><p></p><p>Choice B is incorrect. This is the solution to the equation x + 8 = 88. </p><p></p><p>Choice C is incorrect. This is the solution to the equation x - 8 = 88. </p><p></p><p>Choice D is incorrect. This is the solution to the equation <math-component latex=\"\\frac{x}{8}=88\"></math-component>.</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"Choice A is correct. Dividing both sides of the given equation 8 by yields x - 11. Therefore, 11 is the solution to the given equation. ","type":"text"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"text":"Choice B is incorrect. This is the solution to the equation x + 8 = 88. ","type":"text"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"text":"Choice C is incorrect. This is the solution to the equation x - 8 = 88. ","type":"text"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"text":"Choice D is incorrect. This is the solution to the equation ","type":"text"},{"type":"mathComponent","attrs":{"latex":"\\frac{x}{8}=88"}},{"text":".","type":"text"}]}]}}},{"test_section":"math","question_id":"49729cb4","domain":"algebra","skill":"linear_equations_in_one_variable","question_text":"If 3x - 27 = 24, what is the value of x - 9? \n","question_html":"<p>If 3x - 27 = 24, what is the value of x - 9?&nbsp;</p>","question_json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"If 3x - 27 = 24, what is the value of x - 9? ","type":"text"}]}]},"answer_type":"multiple_choice","answer_choices":[{"html":"<p>1</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"1","type":"text"}]}]}},{"html":"<p>8</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"8","type":"text"}]}]}},{"html":"<p>24</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"24","type":"text"}]}]}},{"html":"<p>35</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"35","type":"text"}]}]}}],"mult_choice_answer":1,"input_answer":null,"difficulty":1,"contains_graphic":false,"solution":{"html":"<p>Choice B is correct. Dividing each side of the given equation by <strong>3</strong> yields <strong>x - 9 = 8</strong>. Therefore, the value of <strong>x - 9</strong> is <strong>8</strong>. </p><p></p><p>Choice A is incorrect and may result from conceptual or calculation errors. </p><p></p><p>Choice C is incorrect. This is the value of <strong>3x - 27</strong>, not <strong>x - 9</strong>. </p><p></p><p>Choice D is incorrect and may result from conceptual or calculation errors.&nbsp;</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"Choice B is correct. Dividing each side of the given equation by ","type":"text"},{"text":"3","type":"text","marks":[{"type":"bold"}]},{"text":" yields ","type":"text"},{"text":"x - 9 = 8","type":"text","marks":[{"type":"bold"}]},{"text":". Therefore, the value of ","type":"text"},{"text":"x - 9","type":"text","marks":[{"type":"bold"}]},{"text":" is ","type":"text"},{"text":"8","type":"text","marks":[{"type":"bold"}]},{"text":". ","type":"text"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"text":"Choice A is incorrect and may result from conceptual or calculation errors. ","type":"text"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"text":"Choice C is incorrect. This is the value of ","type":"text"},{"text":"3x - 27","type":"text","marks":[{"type":"bold"}]},{"text":", not ","type":"text"},{"text":"x - 9","type":"text","marks":[{"type":"bold"}]},{"text":". ","type":"text"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"text":"Choice D is incorrect and may result from conceptual or calculation errors. ","type":"text"}]}]}}}]`;


const system_prompt = `
  Your role is to take a pdf file of SAT practice problems and convert it into a JSON array that depicts these problems.
  You should not return any additional text. Your response should consist only of the JSON array.
  Do not break it into parts. Process all problems from the document in a single response, unless doing so would make you go over the token limit. If you must stop short of returning all the problems, please do not stop in the middle of a problem. If you have to stop in the middle of a problem, you should leave that problem out of the response.
  If the user specifies a certain place in the document then you should start there, rather than processing the whole document. Otherwise, you should start at the beginning and process as many problems as you can with the allotted tokens. 
  The array should include the following fields: test_section, question_id, domain, skill, question_text, question_html, question_json, answer_type, answer_choices, mult_choice_answer, input_answer, difficulty, contains_graphic, solution.
  Here is an explanation of each of the fields:
    test_section: should be a string that is either 'math' or 'reading_writing'
    question_id: should be a string that depicts the college board question id
    domain: a string that indicates the domain of the question
    skill: a string that indicates the skill tested by the question
    question_text: the content of the question depicted in plain text. in some cases, you might not be able to depict the question perfectly with plain text due to mathematical expressions and graphics, but do your best and use the examples given as a guide.
    question_html: the question content formatted as html that can be fed into the tiptap editor. For mathematical expressions, use latex to express those in the html, using the examples provided as guidance. When an image is needed, use this image source as a placeholder: https://hxosbmzvobqvyncpnxqt.supabase.co/storage/v1/object/public/Problem%20Graphics/CollegeBoard%20Question%20Bank%20Graphics/generic-graphic.png?t=2024-11-03T16%3A47%3A58.869Z
    question_json: the question content formatted as json that can be fed into the tiptap editor. For mathematical expressions, use latex to express those in the json object, using the examples provided as guidance
    answer_type: should be either 'multiple_choice' or 'numeric_input'
    answer_choices: an array listing the answer choices. each choice should be given in html form as well as json form, similarly to how you formatted the question in each of those formats.
    mult_choice_answer: for multiple choice questions, this will indicate which answer is the correct one, as an index of where it falls in the array. For example, a correct answer of A would be 0, B would be 1, and so forth. For non-multiple choice questions, this should be null.
    input_answer: This should depict the correct answer when the type of answer is numeric_input. For multiple choice questions, this should be null.
    difficulty: should indicate the difficult of the question. Should be either 'easy', 'medium', or 'hard'
    contains_graphic: a boolean indicating whether there is a graphic in the problem that requires an image
    solution: the rationale behind selecting the correct answer. should be given in both html and json format, similarly to how you formatted the questions.

  If the test_section is math, then skill should take one of the following values: 
    systems_of_two_linear_equations_in_two_variables, linear_functions, linear_equations_in_two_variables, linear_equations_in_one_variable, linear_inequalities_in_one_or_two_variables, nonlinear_equations_in_one_variable_and_systems_of_equations_in_two_variables, nonlinear_functions, equivalent_expressions, ratios_rates_proportional_relationships_and_units, percentages, two_variable_data_models_and_scatterplots, probability_and_conditional_probability, one_variable_data_distributions_and_measures_of_center_and_spread, inference_from_sample_statistics_and_margin_of_error, lines_angles_and_triangles, circles, area_and_volume, right_triangles_and_trigonometry
  If the test_section is reading_writing, then skill should take one of the following values: 
    command_of_evidence, inferences, central_ideas_and_details, words_in_context, text_structure_and_purpose, cross_text_connections, rhetorical_synthesis, transitions, boundaries, form_structure_and_sense

  Below is some sample data of how this should be formatted:
    ${sample_json}
`

const prompt = `
    The attached file contains a number of SAT practice problems from College Board. I would like you to create a JSON array that depicts these problems. The array should include the following fields: test_section, question_id, domain, skill, question_text, question_html, question_json, answer_type, answer_choices, mult_choice_answer, input_answer, difficulty, contains_graphic, solution.
    Here is an explanation of each of the fields:
    test_section: should be a string that is either 'math' or 'reading_writing'
    question_id: should be a string that depicts the college board question id
    domain: a string that indicates the domain of the question
    skill: a string that indicates the skill tested by the question
    question_text: the content of the question depicted in plain text. in some cases, you might not be able to depict the question perfectly with plain text due to mathematical expressions and graphics, but do your best and use the examples given as a guide.
    question_html: the question content formatted as html that can be fed into the tiptap editor. For mathematical expressions, use latex to express those in the html, using the examples provided as guidance. When an image is needed, use this image source as a placeholder: https://hxosbmzvobqvyncpnxqt.supabase.co/storage/v1/object/public/Problem%20Graphics/CollegeBoard%20Question%20Bank%20Graphics/generic-graphic.png?t=2024-11-03T16%3A47%3A58.869Z
    question_json: the question content formatted as json that can be fed into the tiptap editor. For mathematical expressions, use latex to express those in the json object, using the examples provided as guidance
    answer_type: should be either 'multiple_choice' or 'numeric_input'
    answer_choices: an array listing the answer choices. each choice should be given in html form as well as json form, similarly to how you formatted the question in each of those formats.
    mult_choice_answer: for multiple choice questions, this will indicate which answer is the correct one, as an index of where it falls in the array. For example, a correct answer of A would be 0, B would be 1, and so forth. For non-multiple choice questions, this should be null.
    input_answer: This should depict the correct answer when the type of answer is numeric_input. For multiple choice questions, this should be null.
    difficulty: should indicate the difficult of the question. Should be either 'easy', 'medium', or 'hard'
    contains_graphic: a boolean indicating whether there is a graphic in the problem that requires an image
    solution: the rationale behind selecting the correct answer. should be given in both html and json format, similarly to how you formatted the questions.
    Below is some sample data of how this should be formatted:

    [{"test_section":"math","question_id":"feea2bbd","domain":"advanced_math","skill":"nonlinear_functions","question_text":"[img]The graph of the exponential function $latex_startf$latex_end is shown, where $latex_starty=f(x)$latex_end. The y-intercept of the graph is $latex_start(0,y)$latex_end. What is the value of $latex_starty$latex_end? \n","question_html":"<img src=\"https://hxosbmzvobqvyncpnxqt.supabase.co/storage/v1/object/public/Problem%20Graphics/CollegeBoard%20Question%20Bank%20Graphics/question_feea2bbd_graphic.png\" style=\"width: 239px; height: auto; cursor: pointer;\" draggable=\"true\"><p>The graph of the exponential function <math-component latex=\"f\"></math-component> is shown, where <math-component latex=\"y=f(x)\"></math-component>. The <em>y</em>-intercept of the graph is <math-component latex=\"(0,y)\"></math-component>. What is the value of <math-component latex=\"y\"></math-component>?&nbsp;</p>","question_json":{"type":"doc","content":[{"type":"image","attrs":{"id":null,"alt":null,"src":"https://hxosbmzvobqvyncpnxqt.supabase.co/storage/v1/object/public/Problem%20Graphics/CollegeBoard%20Question%20Bank%20Graphics/question_feea2bbd_graphic.png","name":null,"class":null,"ismap":null,"sizes":null,"style":"width: 239px; height: auto; cursor: pointer;","title":null,"width":null,"height":null,"srcset":null,"usemap":null,"loading":null,"decoding":null,"longdesc":null,"tabindex":null,"draggable":true,"aria-label":null,"crossorigin":null,"referrerpolicy":null,"aria-labelledby":null,"aria-describedby":null}},{"type":"paragraph","content":[{"text":"The graph of the exponential function ","type":"text"},{"type":"mathComponent","attrs":{"latex":"f"}},{"text":" is shown, where ","type":"text"},{"type":"mathComponent","attrs":{"latex":"y=f(x)"}},{"text":". The ","type":"text"},{"text":"y","type":"text","marks":[{"type":"italic"}]},{"text":"-intercept of the graph is ","type":"text"},{"type":"mathComponent","attrs":{"latex":"(0,y)"}},{"text":". What is the value of ","type":"text"},{"type":"mathComponent","attrs":{"latex":"y"}},{"text":"? ","type":"text"}]}]},"answer_type":"numeric_input","answer_choices":[],"mult_choice_answer":null,"input_answer":"3","difficulty":1,"contains_graphic":true,"solution":{"html":"<p>The correct answer is 3. It's given that the <em>y</em>-intercept of the graph shown is <math-component latex=\"(0,y)\"></math-component>. The graph passes through the point (0,3). Therefore, the value of <math-component latex=\"y\"></math-component> is 3.&nbsp;</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"The correct answer is 3. It's given that the ","type":"text"},{"text":"y","type":"text","marks":[{"type":"italic"}]},{"text":"-intercept of the graph shown is ","type":"text"},{"type":"mathComponent","attrs":{"latex":"(0,y)"}},{"text":". The graph passes through the point (0,3). Therefore, the value of ","type":"text"},{"type":"mathComponent","attrs":{"latex":"y"}},{"text":" is 3. ","type":"text"}]}]}}},{"test_section":"math","question_id":"3cc991d1","domain":"algebra","skill":"linear_equations_one_variable","question_text":"On the first day of a semester, a film club has 90 members. Each day after the first day of the semester, 10 new members join the film club. If no members leave the film club, how many total members will the film club have 4 days after the first day of the semester? \n","question_html":"<p>On the first day of a semester, a film club has <strong>90</strong> members. Each day after the first day of the semester, <strong>10</strong> new members join the film club. If no members leave the film club, how many total members will the film club have <strong>4</strong> days after the first day of the semester?&nbsp;</p>","question_json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"On the first day of a semester, a film club has ","type":"text"},{"text":"90","type":"text","marks":[{"type":"bold"}]},{"text":" members. Each day after the first day of the semester, ","type":"text"},{"text":"10","type":"text","marks":[{"type":"bold"}]},{"text":" new members join the film club. If no members leave the film club, how many total members will the film club have ","type":"text"},{"text":"4","type":"text","marks":[{"type":"bold"}]},{"text":" days after the first day of the semester? ","type":"text"}]}]},"answer_type":"multiple_choice","answer_choices":[{"html":"<p>400</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"400","type":"text"}]}]}},{"html":"<p>130</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"130","type":"text"}]}]}},{"html":"<p>94</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"94","type":"text"}]}]}},{"html":"<p>90</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"90","type":"text"}]}]}}],"mult_choice_answer":1,"input_answer":null,"difficulty":1,"contains_graphic":false,"solution":{"html":"<p>Choice B is correct. It’s given that the film club has <strong>90</strong> members on the first day of a semester, and <strong>10</strong> new members join the film club each day after the first day of the semester. This means that after <strong>4</strong> days, <math-component latex=\"4\\times10\"></math-component>, or <strong>40</strong>, new members will have joined the club. Adding <strong>40</strong> members to the original <strong>90</strong> club members yields <strong>130</strong> members. Thus, the film club will have <strong>130</strong> total members <strong>4</strong> days after the first day of the semester. </p><p></p><p>Choice A is incorrect. This is the number of members that will have joined the film club <strong>4</strong> days after the first day of the semester if <strong>100</strong> new members, not <strong>10</strong>, join the film club each day. </p><p></p><p>Choice C is incorrect. This is the number of members the film club will have <strong>4</strong> days after the first day of the semester if 1 new member, not <strong>10</strong>, joins the film club each day. </p><p></p><p>Choice D is incorrect. This is the number of members the film club has on the first day of the semester.&nbsp;</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"Choice B is correct. It’s given that the film club has ","type":"text"},{"text":"90","type":"text","marks":[{"type":"bold"}]},{"text":" members on the first day of a semester, and ","type":"text"},{"text":"10","type":"text","marks":[{"type":"bold"}]},{"text":" new members join the film club each day after the first day of the semester. This means that after ","type":"text"},{"text":"4","type":"text","marks":[{"type":"bold"}]},{"text":" days, ","type":"text"},{"type":"mathComponent","attrs":{"latex":"4\\times10"}},{"text":", or ","type":"text"},{"text":"40","type":"text","marks":[{"type":"bold"}]},{"text":", new members will have joined the club. Adding ","type":"text"},{"text":"40","type":"text","marks":[{"type":"bold"}]},{"text":" members to the original ","type":"text"},{"text":"90","type":"text","marks":[{"type":"bold"}]},{"text":" club members yields ","type":"text"},{"text":"130","type":"text","marks":[{"type":"bold"}]},{"text":" members. Thus, the film club will have ","type":"text"},{"text":"130","type":"text","marks":[{"type":"bold"}]},{"text":" total members ","type":"text"},{"text":"4","type":"text","marks":[{"type":"bold"}]},{"text":" days after the first day of the semester. ","type":"text"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"text":"Choice A is incorrect. This is the number of members that will have joined the film club ","type":"text"},{"text":"4","type":"text","marks":[{"type":"bold"}]},{"text":" days after the first day of the semester if ","type":"text"},{"text":"100","type":"text","marks":[{"type":"bold"}]},{"text":" new members, not ","type":"text"},{"text":"10","type":"text","marks":[{"type":"bold"}]},{"text":", join the film club each day. ","type":"text"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"text":"Choice C is incorrect. This is the number of members the film club will have ","type":"text"},{"text":"4","type":"text","marks":[{"type":"bold"}]},{"text":" days after the first day of the semester if 1 new member, not ","type":"text"},{"text":"10","type":"text","marks":[{"type":"bold"}]},{"text":", joins the film club each day. ","type":"text"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"text":"Choice D is incorrect. This is the number of members the film club has on the first day of the semester. ","type":"text"}]}]}}},{"test_section":"math","question_id":"005e9982","domain":"advanced_math","skill":"nonlinear_functions","question_text":"$latex_startf(x)=9,000\\left(0.66\\right)^{x}$latex_end\nThe given function $latex_startf$latex_end models the number of advertisements a company sent to its clients each year, where $latex_startx$latex_end represents the number of years since 1997, and $latex_start0\\le x\\le5$latex_end. If $latex_starty=f(x)$latex_end is graphed in the xy-plane, which of the following is the best interpretation of the y-intercept of the graph in this context? \n","question_html":"<p><math-component latex=\"f(x)=9,000\\left(0.66\\right)^{x}\"></math-component></p><p>The given function <math-component latex=\"f\"></math-component> models the number of advertisements a company sent to its clients each year, where <math-component latex=\"x\"></math-component> represents the number of years since 1997, and <math-component latex=\"0\\le x\\le5\"></math-component>. If <math-component latex=\"y=f(x)\"></math-component> is graphed in the <em>xy</em>-plane, which of the following is the best interpretation of the <em>y</em>-intercept of the graph in this context?&nbsp;</p>","question_json":{"type":"doc","content":[{"type":"paragraph","content":[{"type":"mathComponent","attrs":{"latex":"f(x)=9,000\\left(0.66\\right)^{x}"}}]},{"type":"paragraph","content":[{"text":"The given function ","type":"text"},{"type":"mathComponent","attrs":{"latex":"f"}},{"text":" models the number of advertisements a company sent to its clients each year, where ","type":"text"},{"type":"mathComponent","attrs":{"latex":"x"}},{"text":" represents the number of years since 1997, and ","type":"text"},{"type":"mathComponent","attrs":{"latex":"0\\le x\\le5"}},{"text":". If ","type":"text"},{"type":"mathComponent","attrs":{"latex":"y=f(x)"}},{"text":" is graphed in the ","type":"text"},{"text":"xy","type":"text","marks":[{"type":"italic"}]},{"text":"-plane, which of the following is the best interpretation of the ","type":"text"},{"text":"y","type":"text","marks":[{"type":"italic"}]},{"text":"-intercept of the graph in this context? ","type":"text"}]}]},"answer_type":"multiple_choice","answer_choices":[{"html":"<p>The minimum estimated number of advertisements the company sent to its clients during the 5 years was 1,708.&nbsp;</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"The minimum estimated number of advertisements the company sent to its clients during the 5 years was 1,708. ","type":"text"}]}]}},{"html":"<p>The minimum estimated number of advertisements the company sent to its clients during the 5 years was 9,000.&nbsp;</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"The minimum estimated number of advertisements the company sent to its clients during the 5 years was 9,000. ","type":"text"}]}]}},{"html":"<p>The estimated number of advertisements the company sent to its clients in 1997 was 1,708.&nbsp;</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"The estimated number of advertisements the company sent to its clients in 1997 was 1,708. ","type":"text"}]}]}},{"html":"<p>The estimated number of advertisements the company sent to its clients in 1997 was 9,000.&nbsp;</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"The estimated number of advertisements the company sent to its clients in 1997 was 9,000. ","type":"text"}]}]}}],"mult_choice_answer":3,"input_answer":null,"difficulty":3,"contains_graphic":false,"solution":{"html":"<p>Choice D is correct. The <em>y</em>-intercept of a graph in the <em>xy</em>-plane is the point where x = 0. For the given function <math-component latex=\"f\"></math-component>, the <em>y</em>-intercept of the graph of <math-component latex=\"y=f(x)\"></math-component> in the <em>xy</em>-plane can be found by substituting 0 for <math-component latex=\"x\"></math-component> in the equation <math-component latex=\"y=9,000\\left(0.66\\right)^{x}\"></math-component>, which gives <math-component latex=\"y=9,000\\left(0.66\\right)^0\"></math-component>. This is equivalent to <math-component latex=\"y=9,000(1)\"></math-component>, or <math-component latex=\"y = 9,000\"></math-component>. Therefore, the <em>y</em>-intercept of the graph of <math-component latex=\"y=f(x)\"></math-component> is (0, 9,000). It’s given that the function <math-component latex=\"f\"></math-component> models the number of advertisements a company sent to its clients each year. Therefore, <math-component latex=\"f(x)\"></math-component> represents the estimated number of advertisements the company sent to its clients each year. It's also given that <math-component latex=\"x\"></math-component> represents the number of years since 1997. Therefore, <math-component latex=\"x=0\"></math-component> represents 0 years since 1997, or 1997. Thus, the best interpretation of the <em>y</em>-intercept of the graph <math-component latex=\"f=f(x)\"></math-component> of is that the estimated number of advertisements the company sent to its clients in 1997 was 9,000. </p><p></p><p>Choice A is incorrect and may result from conceptual or calculation errors. </p><p></p><p>Choice B is incorrect and may result from conceptual or calculation errors. </p><p></p><p>Choice C is incorrect and may result from conceptual or calculation errors.&nbsp;</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"Choice D is correct. The ","type":"text"},{"text":"y","type":"text","marks":[{"type":"italic"}]},{"text":"-intercept of a graph in the ","type":"text"},{"text":"xy","type":"text","marks":[{"type":"italic"}]},{"text":"-plane is the point where x = 0. For the given function ","type":"text"},{"type":"mathComponent","attrs":{"latex":"f"}},{"text":", the ","type":"text"},{"text":"y","type":"text","marks":[{"type":"italic"}]},{"text":"-intercept of the graph of ","type":"text"},{"type":"mathComponent","attrs":{"latex":"y=f(x)"}},{"text":" in the ","type":"text"},{"text":"xy","type":"text","marks":[{"type":"italic"}]},{"text":"-plane can be found by substituting 0 for ","type":"text"},{"type":"mathComponent","attrs":{"latex":"x"}},{"text":" in the equation ","type":"text"},{"type":"mathComponent","attrs":{"latex":"y=9,000\\left(0.66\\right)^{x}"}},{"text":", which gives ","type":"text"},{"type":"mathComponent","attrs":{"latex":"y=9,000\\left(0.66\\right)^0"}},{"text":". This is equivalent to ","type":"text"},{"type":"mathComponent","attrs":{"latex":"y=9,000(1)"}},{"text":", or ","type":"text"},{"type":"mathComponent","attrs":{"latex":"y = 9,000"}},{"text":". Therefore, the ","type":"text"},{"text":"y","type":"text","marks":[{"type":"italic"}]},{"text":"-intercept of the graph of ","type":"text"},{"type":"mathComponent","attrs":{"latex":"y=f(x)"}},{"text":" is (0, 9,000). It’s given that the function ","type":"text"},{"type":"mathComponent","attrs":{"latex":"f"}},{"text":" models the number of advertisements a company sent to its clients each year. Therefore, ","type":"text"},{"type":"mathComponent","attrs":{"latex":"f(x)"}},{"text":" represents the estimated number of advertisements the company sent to its clients each year. It's also given that ","type":"text"},{"type":"mathComponent","attrs":{"latex":"x"}},{"text":" represents the number of years since 1997. Therefore, ","type":"text"},{"type":"mathComponent","attrs":{"latex":"x=0"}},{"text":" represents 0 years since 1997, or 1997. Thus, the best interpretation of the ","type":"text"},{"text":"y","type":"text","marks":[{"type":"italic"}]},{"text":"-intercept of the graph ","type":"text"},{"type":"mathComponent","attrs":{"latex":"f=f(x)"}},{"text":" of is that the estimated number of advertisements the company sent to its clients in 1997 was 9,000. ","type":"text"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"text":"Choice A is incorrect and may result from conceptual or calculation errors. ","type":"text"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"text":"Choice B is incorrect and may result from conceptual or calculation errors. ","type":"text"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"text":"Choice C is incorrect and may result from conceptual or calculation errors. ","type":"text"}]}]}}},{"test_section":"math","question_id":"6dc8c2cd","domain":"algebra","skill":"linear_inequalities","question_text":"For a party, 50 dinner rolls are needed. Dinner rolls are sold in packages of 12. What is the minimum number of packages that should be bought for the party? \n","question_html":"<p>For a party, 50 dinner rolls are needed. Dinner rolls are sold in packages of 12. What is the minimum number of packages that should be bought for the party?&nbsp;</p>","question_json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"For a party, 50 dinner rolls are needed. Dinner rolls are sold in packages of 12. What is the minimum number of packages that should be bought for the party? ","type":"text"}]}]},"answer_type":"numeric_input","answer_choices":[],"mult_choice_answer":null,"input_answer":"5","difficulty":1,"contains_graphic":false,"solution":{"html":"<p>The correct answer is 5. Let <math-component latex=\"p\"></math-component> represent the number of packages of dinner rolls that should be bought for the party. It's given that dinner rolls are sold in packages of 12. Therefore, <math-component latex=\"12p\"></math-component> represents the number of dinner rolls that should be bought for the party. It's also given that 50 dinner rolls are needed; therefore, <math-component latex=\"12p\\leq50\"></math-component>. Dividing both sides of this inequality by 12 yields <math-component latex=\"12p\\leq\\frac{50}{12}\"></math-component>, or approximately <math-component latex=\"p\\leq4.17\"></math-component>. Since the number of packages of dinner rolls must be a whole number, the minimum number of packages that should be bought for the party is 5.&nbsp;</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"The correct answer is 5. Let ","type":"text"},{"type":"mathComponent","attrs":{"latex":"p"}},{"text":" represent the number of packages of dinner rolls that should be bought for the party. It's given that dinner rolls are sold in packages of 12. Therefore, ","type":"text"},{"type":"mathComponent","attrs":{"latex":"12p"}},{"text":" represents the number of dinner rolls that should be bought for the party. It's also given that 50 dinner rolls are needed; therefore, ","type":"text"},{"type":"mathComponent","attrs":{"latex":"12p\\leq50"}},{"text":". Dividing both sides of this inequality by 12 yields ","type":"text"},{"type":"mathComponent","attrs":{"latex":"12p\\leq\\frac{50}{12}"}},{"text":", or approximately ","type":"text"},{"type":"mathComponent","attrs":{"latex":"p\\leq4.17"}},{"text":". Since the number of packages of dinner rolls must be a whole number, the minimum number of packages that should be bought for the party is 5. ","type":"text"}]}]}}},{"test_section":"math","question_id":"ed5b7c61","domain":"advanced_math","skill":"nonlinear_functions","question_text":"$latex_startq(x)=32(2^x)$latex_end\nWhich table gives three values of $latex_startx$latex_end and their corresponding values of $latex_startq(x)$latex_end for function $latex_startq$latex_end? \n","question_html":"<p><math-component latex=\"q(x)=32(2^x)\"></math-component></p><p>Which table gives three values of <math-component latex=\"x\"></math-component> and their corresponding values of <math-component latex=\"q(x)\"></math-component> for function <math-component latex=\"q\"></math-component>?&nbsp;</p>","question_json":{"type":"doc","content":[{"type":"paragraph","content":[{"type":"mathComponent","attrs":{"latex":"q(x)=32(2^x)"}}]},{"type":"paragraph","content":[{"text":"Which table gives three values of ","type":"text"},{"type":"mathComponent","attrs":{"latex":"x"}},{"text":" and their corresponding values of ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q(x)"}},{"text":" for function ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q"}},{"text":"? ","type":"text"}]}]},"answer_type":"multiple_choice","answer_choices":[{"html":"<table style=\"min-width: 100px\"><colgroup><col><col><col><col></colgroup><tbody><tr><td colspan=\"1\" rowspan=\"1\"><p>x</p></td><td colspan=\"1\" rowspan=\"1\"><p>-1</p></td><td colspan=\"1\" rowspan=\"1\"><p>0</p></td><td colspan=\"1\" rowspan=\"1\"><p>1</p></td></tr><tr><td colspan=\"1\" rowspan=\"1\"><p>q(x)</p></td><td colspan=\"1\" rowspan=\"1\"><p>-64</p></td><td colspan=\"1\" rowspan=\"1\"><p>0</p></td><td colspan=\"1\" rowspan=\"1\"><p>64</p></td></tr></tbody></table>","json":{"type":"doc","content":[{"type":"table","content":[{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"x","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"-1","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"0","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"1","type":"text"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"q(x)","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"-64","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"0","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"64","type":"text"}]}]}]}]}]}},{"html":"<p></p><table style=\"min-width: 100px\"><colgroup><col><col><col><col></colgroup><tbody><tr><td colspan=\"1\" rowspan=\"1\"><p>x</p></td><td colspan=\"1\" rowspan=\"1\"><p>-1</p></td><td colspan=\"1\" rowspan=\"1\"><p>0</p></td><td colspan=\"1\" rowspan=\"1\"><p>1</p></td></tr><tr><td colspan=\"1\" rowspan=\"1\"><p>q(x)</p></td><td colspan=\"1\" rowspan=\"1\"><p><math-component latex=\"\\frac{1}{16}\"></math-component></p></td><td colspan=\"1\" rowspan=\"1\"><p>2</p></td><td colspan=\"1\" rowspan=\"1\"><p>64</p></td></tr></tbody></table>","json":{"type":"doc","content":[{"type":"paragraph"},{"type":"table","content":[{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"x","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"-1","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"0","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"1","type":"text"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"q(x)","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"type":"mathComponent","attrs":{"latex":"\\frac{1}{16}"}}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"2","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"64","type":"text"}]}]}]}]}]}},{"html":"<p></p><table style=\"min-width: 100px\"><colgroup><col><col><col><col></colgroup><tbody><tr><td colspan=\"1\" rowspan=\"1\"><p>x</p></td><td colspan=\"1\" rowspan=\"1\"><p>-1</p></td><td colspan=\"1\" rowspan=\"1\"><p>0</p></td><td colspan=\"1\" rowspan=\"1\"><p>1</p></td></tr><tr><td colspan=\"1\" rowspan=\"1\"><p>q(x)</p></td><td colspan=\"1\" rowspan=\"1\"><p><math-component latex=\"\\frac{1}{16}\"></math-component></p></td><td colspan=\"1\" rowspan=\"1\"><p>32</p></td><td colspan=\"1\" rowspan=\"1\"><p>64</p></td></tr></tbody></table>","json":{"type":"doc","content":[{"type":"paragraph"},{"type":"table","content":[{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"x","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"-1","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"0","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"1","type":"text"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"q(x)","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"type":"mathComponent","attrs":{"latex":"\\frac{1}{16}"}}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"32","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"64","type":"text"}]}]}]}]}]}},{"html":"<p></p><table style=\"min-width: 100px\"><colgroup><col><col><col><col></colgroup><tbody><tr><td colspan=\"1\" rowspan=\"1\"><p>x</p></td><td colspan=\"1\" rowspan=\"1\"><p>-1</p></td><td colspan=\"1\" rowspan=\"1\"><p>0</p></td><td colspan=\"1\" rowspan=\"1\"><p>1</p></td></tr><tr><td colspan=\"1\" rowspan=\"1\"><p>q(x)</p></td><td colspan=\"1\" rowspan=\"1\"><p>16</p></td><td colspan=\"1\" rowspan=\"1\"><p>32</p></td><td colspan=\"1\" rowspan=\"1\"><p>64</p></td></tr></tbody></table>","json":{"type":"doc","content":[{"type":"paragraph"},{"type":"table","content":[{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"x","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"-1","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"0","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"1","type":"text"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"q(x)","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"16","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"32","type":"text"}]}]},{"type":"tableCell","attrs":{"colspan":1,"rowspan":1,"colwidth":null},"content":[{"type":"paragraph","content":[{"text":"64","type":"text"}]}]}]}]}]}}],"mult_choice_answer":3,"input_answer":null,"difficulty":2,"contains_graphic":false,"solution":{"html":"<p>Choice D is correct. Substituting -1 for <math-component latex=\"x\"></math-component> in the given function yields <math-component latex=\"q\\left(-1\\right)=32\\left(2\\right)^{-1}\"></math-component>, which is equivalent to <math-component latex=\"q(-1)=32(\\frac{1}{2})\"></math-component>, or <math-component latex=\"q(-1)=16\"></math-component>. Therefore, when <math-component latex=\"x=-1\"></math-component>, the corresponding value of <math-component latex=\"q(x)\"></math-component> for function <math-component latex=\"q\"></math-component> is 16. Substituting 0 for <math-component latex=\"x\"></math-component> in the given function yields <math-component latex=\"q(0)=32(2)^0\"></math-component>, which is equivalent to <math-component latex=\"q(0)=32(1)\"></math-component>, or <math-component latex=\"q(0)=32\"></math-component>. Therefore, when <math-component latex=\"x=0\"></math-component> , the corresponding value of <math-component latex=\"q(x)\"></math-component> for function <math-component latex=\"q\"></math-component> is 32. Substituting 1 for <math-component latex=\"x\"></math-component> in the given function yields <math-component latex=\"q(1)=32(2)^1\"></math-component>, which is equivalent to <math-component latex=\"q(1) = 32(2)\"></math-component>, or <math-component latex=\"q(1)=64\"></math-component>. Therefore, when <math-component latex=\"x=1\"></math-component>, the corresponding value of <math-component latex=\"q(x)\"></math-component> for function <math-component latex=\"q\"></math-component> is 64. Of the choices given, only the table in choice D gives these three values of <math-component latex=\"x\"></math-component> and their corresponding values of <math-component latex=\"q(x)\"></math-component> for function <math-component latex=\"q\"></math-component>. </p><p></p><p>Choice A is incorrect. This table gives three values of <math-component latex=\"x\"></math-component>and their corresponding values of <math-component latex=\"q(x)\"></math-component> for the function <math-component latex=\"q(x) = 32(2x)\"></math-component>. </p><p></p><p>Choice B is incorrect. This table gives three values of <math-component latex=\"x\"></math-component>and their corresponding values of <math-component latex=\"q(x)\"></math-component> for the function <math-component latex=\"q(x)=2(32)^x\"></math-component>. </p><p></p><p>Choice C is incorrect and may result from conceptual or calculation errors.&nbsp;</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"Choice D is correct. Substituting -1 for ","type":"text"},{"type":"mathComponent","attrs":{"latex":"x"}},{"text":" in the given function yields ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q\\left(-1\\right)=32\\left(2\\right)^{-1}"}},{"text":", which is equivalent to ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q(-1)=32(\\frac{1}{2})"}},{"text":", or ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q(-1)=16"}},{"text":". Therefore, when ","type":"text"},{"type":"mathComponent","attrs":{"latex":"x=-1"}},{"text":", the corresponding value of ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q(x)"}},{"text":" for function ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q"}},{"text":" is 16. Substituting 0 for ","type":"text"},{"type":"mathComponent","attrs":{"latex":"x"}},{"text":" in the given function yields ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q(0)=32(2)^0"}},{"text":", which is equivalent to ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q(0)=32(1)"}},{"text":", or ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q(0)=32"}},{"text":". Therefore, when ","type":"text"},{"type":"mathComponent","attrs":{"latex":"x=0"}},{"text":" , the corresponding value of ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q(x)"}},{"text":" for function ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q"}},{"text":" is 32. Substituting 1 for ","type":"text"},{"type":"mathComponent","attrs":{"latex":"x"}},{"text":" in the given function yields ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q(1)=32(2)^1"}},{"text":", which is equivalent to ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q(1) = 32(2)"}},{"text":", or ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q(1)=64"}},{"text":". Therefore, when ","type":"text"},{"type":"mathComponent","attrs":{"latex":"x=1"}},{"text":", the corresponding value of ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q(x)"}},{"text":" for function ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q"}},{"text":" is 64. Of the choices given, only the table in choice D gives these three values of ","type":"text"},{"type":"mathComponent","attrs":{"latex":"x"}},{"text":" and their corresponding values of ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q(x)"}},{"text":" for function ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q"}},{"text":". ","type":"text"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"text":"Choice A is incorrect. This table gives three values of ","type":"text"},{"type":"mathComponent","attrs":{"latex":"x"}},{"text":"and their corresponding values of ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q(x)"}},{"text":" for the function ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q(x) = 32(2x)"}},{"text":". ","type":"text"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"text":"Choice B is incorrect. This table gives three values of ","type":"text"},{"type":"mathComponent","attrs":{"latex":"x"}},{"text":"and their corresponding values of ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q(x)"}},{"text":" for the function ","type":"text"},{"type":"mathComponent","attrs":{"latex":"q(x)=2(32)^x"}},{"text":". ","type":"text"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"text":"Choice C is incorrect and may result from conceptual or calculation errors. ","type":"text"}]}]}}},{"test_section":"math","question_id":"57e4b0b9","domain":"algebra","skill":"linear_inequalities","question_text":"A model estimates that whales from the genus Eschrichtius travel 72 to 77 miles in the ocean each day during their migration. Based on this model, which inequality represents the estimated total number of\nmiles, x, a whale from the genus Eschrichtius could travel in 16 days of its migration?\n","question_html":"<p>A model estimates that whales from the genus <em>Eschrichtius </em>travel 72 to 77 miles in the ocean each day during their migration. Based on this model, which inequality represents the estimated total number of</p><p>miles, x, a whale from the genus <em>Eschrichtius </em>could travel in 16 days of its migration?</p>","question_json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"A model estimates that whales from the genus ","type":"text"},{"text":"Eschrichtius ","type":"text","marks":[{"type":"italic"}]},{"text":"travel 72 to 77 miles in the ocean each day during their migration. Based on this model, which inequality represents the estimated total number of","type":"text"}]},{"type":"paragraph","content":[{"text":"miles, x, a whale from the genus ","type":"text"},{"text":"Eschrichtius ","type":"text","marks":[{"type":"italic"}]},{"text":"could travel in 16 days of its migration?","type":"text"}]}]},"answer_type":"multiple_choice","answer_choices":[{"html":"<p><math-component latex=\"72+16\\leq x\\leq77+16\"></math-component></p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"type":"mathComponent","attrs":{"latex":"72+16\\leq x\\leq77+16"}}]}]}},{"html":"<p><math-component latex=\"\\left(72\\right)\\left(16\\right)\\leq x\\leq\\left(77\\right)\\left(16\\right)\"></math-component></p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"type":"mathComponent","attrs":{"latex":"\\left(72\\right)\\left(16\\right)\\leq x\\leq\\left(77\\right)\\left(16\\right)"}}]}]}},{"html":"<p><math-component latex=\"72\\leq16+x\\leq77\"></math-component></p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"type":"mathComponent","attrs":{"latex":"72\\leq16+x\\leq77"}}]}]}},{"html":"<p><math-component latex=\"72\\leq16x\\leq77\"></math-component></p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"type":"mathComponent","attrs":{"latex":"72\\leq16x\\leq77"}}]}]}}],"mult_choice_answer":1,"input_answer":null,"difficulty":2,"contains_graphic":false,"solution":{"html":"<p>Choice B is correct. It's given that the model estimates that whales from the genus <em>Eschrichtius </em>travel 72 to 77 miles in the ocean each day during their migration. If one of these whales travels 72 miles each day for 16 days, then the whale travels 72(16) miles total. If one of these whales 77 travels miles each day for 16 days, then the whale travels 77(16) miles total. Therefore, the model estimates that in 16 days of its migration, a whale from the genus <em>Eschrichtius </em>could</p><p>travel at least 72(16) and at most 77(16) miles total. Thus, the inequality <math-component latex=\"\\left(72\\right)\\left(16\\right)\\leq x\\leq\\left(77\\right)\\left(16\\right)\"></math-component> estimated total number of miles, <math-component latex=\"x\"></math-component> , a whale from the genus <em>Eschrichtius </em>could travel in 16 days of its migration.</p><p></p><p>Choice A is incorrect and may result from conceptual errors. </p><p></p><p>Choice C is incorrect and may result from conceptual errors. </p><p></p><p>Choice D is incorrect and may result from conceptual errors.</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"Choice B is correct. It's given that the model estimates that whales from the genus ","type":"text"},{"text":"Eschrichtius ","type":"text","marks":[{"type":"italic"}]},{"text":"travel 72 to 77 miles in the ocean each day during their migration. If one of these whales travels 72 miles each day for 16 days, then the whale travels 72(16) miles total. If one of these whales 77 travels miles each day for 16 days, then the whale travels 77(16) miles total. Therefore, the model estimates that in 16 days of its migration, a whale from the genus ","type":"text"},{"text":"Eschrichtius ","type":"text","marks":[{"type":"italic"}]},{"text":"could","type":"text"}]},{"type":"paragraph","content":[{"text":"travel at least 72(16) and at most 77(16) miles total. Thus, the inequality ","type":"text"},{"type":"mathComponent","attrs":{"latex":"\\left(72\\right)\\left(16\\right)\\leq x\\leq\\left(77\\right)\\left(16\\right)"}},{"text":" estimated total number of miles, ","type":"text"},{"type":"mathComponent","attrs":{"latex":"x"}},{"text":" , a whale from the genus ","type":"text"},{"text":"Eschrichtius ","type":"text","marks":[{"type":"italic"}]},{"text":"could travel in 16 days of its migration.","type":"text"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"text":"Choice A is incorrect and may result from conceptual errors. ","type":"text"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"text":"Choice C is incorrect and may result from conceptual errors. ","type":"text"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"text":"Choice D is incorrect and may result from conceptual errors.","type":"text"}]}]}}},{"test_section":"math","question_id":"a23c1142","domain":"algebra","skill":"linear_equations_one_variable","question_text":"8x = 88\n\nWhat value of x is the solution to the given equation?\n","question_html":"<p>8x = 88</p><p></p><p>What value of <strong>x</strong> is the solution to the given equation?</p>","question_json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"8x = 88","type":"text"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"text":"What value of ","type":"text"},{"text":"x","type":"text","marks":[{"type":"bold"}]},{"text":" is the solution to the given equation?","type":"text"}]}]},"answer_type":"multiple_choice","answer_choices":[{"html":"<p>11</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"11","type":"text"}]}]}},{"html":"<p>80</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"80","type":"text"}]}]}},{"html":"<p>96</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"96","type":"text"}]}]}},{"html":"<p>704</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"704","type":"text"}]}]}}],"mult_choice_answer":0,"input_answer":null,"difficulty":1,"contains_graphic":false,"solution":{"html":"<p>Choice A is correct. Dividing both sides of the given equation 8 by yields x - 11. Therefore, 11 is the solution to the given equation. </p><p></p><p>Choice B is incorrect. This is the solution to the equation x + 8 = 88. </p><p></p><p>Choice C is incorrect. This is the solution to the equation x - 8 = 88. </p><p></p><p>Choice D is incorrect. This is the solution to the equation <math-component latex=\"\\frac{x}{8}=88\"></math-component>.</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"Choice A is correct. Dividing both sides of the given equation 8 by yields x - 11. Therefore, 11 is the solution to the given equation. ","type":"text"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"text":"Choice B is incorrect. This is the solution to the equation x + 8 = 88. ","type":"text"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"text":"Choice C is incorrect. This is the solution to the equation x - 8 = 88. ","type":"text"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"text":"Choice D is incorrect. This is the solution to the equation ","type":"text"},{"type":"mathComponent","attrs":{"latex":"\\frac{x}{8}=88"}},{"text":".","type":"text"}]}]}}},{"test_section":"math","question_id":"49729cb4","domain":"algebra","skill":"linear_equations_one_variable","question_text":"If 3x - 27 = 24, what is the value of x - 9? \n","question_html":"<p>If 3x - 27 = 24, what is the value of x - 9?&nbsp;</p>","question_json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"If 3x - 27 = 24, what is the value of x - 9? ","type":"text"}]}]},"answer_type":"multiple_choice","answer_choices":[{"html":"<p>1</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"1","type":"text"}]}]}},{"html":"<p>8</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"8","type":"text"}]}]}},{"html":"<p>24</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"24","type":"text"}]}]}},{"html":"<p>35</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"35","type":"text"}]}]}}],"mult_choice_answer":1,"input_answer":null,"difficulty":1,"contains_graphic":false,"solution":{"html":"<p>Choice B is correct. Dividing each side of the given equation by <strong>3</strong> yields <strong>x - 9 = 8</strong>. Therefore, the value of <strong>x - 9</strong> is <strong>8</strong>. </p><p></p><p>Choice A is incorrect and may result from conceptual or calculation errors. </p><p></p><p>Choice C is incorrect. This is the value of <strong>3x - 27</strong>, not <strong>x - 9</strong>. </p><p></p><p>Choice D is incorrect and may result from conceptual or calculation errors.&nbsp;</p>","json":{"type":"doc","content":[{"type":"paragraph","content":[{"text":"Choice B is correct. Dividing each side of the given equation by ","type":"text"},{"text":"3","type":"text","marks":[{"type":"bold"}]},{"text":" yields ","type":"text"},{"text":"x - 9 = 8","type":"text","marks":[{"type":"bold"}]},{"text":". Therefore, the value of ","type":"text"},{"text":"x - 9","type":"text","marks":[{"type":"bold"}]},{"text":" is ","type":"text"},{"text":"8","type":"text","marks":[{"type":"bold"}]},{"text":". ","type":"text"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"text":"Choice A is incorrect and may result from conceptual or calculation errors. ","type":"text"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"text":"Choice C is incorrect. This is the value of ","type":"text"},{"text":"3x - 27","type":"text","marks":[{"type":"bold"}]},{"text":", not ","type":"text"},{"text":"x - 9","type":"text","marks":[{"type":"bold"}]},{"text":". ","type":"text"}]},{"type":"paragraph"},{"type":"paragraph","content":[{"text":"Choice D is incorrect and may result from conceptual or calculation errors. ","type":"text"}]}]}}}]


`

function prepareProblemForDB(problem, options = {}) {
    let difficulties = {easy: 1, medium: 2, hard: 3};
    let is_practice_test = options.is_practice_test || false;
    let db_problem = {
        source: 'collegeboard', 
        in_cb_question_bank: true,
        is_practice_test: is_practice_test,
        subsource: 'question_bank', 
        test_section: problem.test_section,
        source_question_id: problem.question_id,
        cb_domain: problem.domain,
        cb_skill: problem.skill,
        question_text: problem.question_text,
        question_html: problem.question_html,
        question_json: problem.question_json, 
        answer_type: problem.answer_type,
        answer_choices: problem.answer_choices,
        input_answer: problem.input_answer,
        mult_choice_answer: problem.mult_choice_answer,
        difficulty: difficulties[problem.difficulty], 
        source_solution: problem.solution, 
        contains_graphic: problem.contains_graphic,
        discipline: 'SAT', 
        problem_type: 'practice_problem', 
        allow_multiple_selection: false
    }
    return db_problem;
}

function getProblemsFromAnthropicMsg(msg) {
    let resp_json = msg.content[0].text;
    resp_json = `${resp_json}`;
    console.log('end of resp:')
    console.log(resp_json.slice(resp_json.length - 100));
    let problems = null;
    try {
        problems = JSON.parse(resp_json);
        console.log('parsed problems')
        console.log(problems.length);
        for (let problem of problems) {
            console.log(problem.question_id);
        }
    } catch(err) {
        console.log('failed to parse original json, will try to reformat')
        let json_start = resp_json.indexOf("[");
        console.log('json start:')
        console.log(json_start);
        resp_json = resp_json.slice(json_start);
        let last_question_id_index = resp_json.lastIndexOf("question_id");
        resp_json = resp_json.slice(0, last_question_id_index);
        let last_curly_brace_close = resp_json.lastIndexOf("}");
        resp_json = resp_json.slice(0, last_curly_brace_close);
        resp_json += "]";
        console.log('start of resp:')
        console.log(resp_json.slice(0, 100));
        console.log('end of resp:')
        console.log(resp_json.slice(resp_json.length - 100));
        problems = JSON.parse(resp_json);
        console.log('parsed json');
        console.log(problems.length);
    }
    return problems;
}

async function saveProblemsToDB(client, problems, options = {}) {
    console.log('saveProblemsToDB')
    let db_problems = [];
    let question_ids = [];
    let failed_question_ids = [];
    let from_test = options.from_test || false;
    for (let problem of problems) {
        let db_problem = prepareProblemForDB(problem, {is_practice_test: from_test});
        console.log('prepared for db');
        const { data, error } = await client.from('sat_problems').insert(db_problem);
        console.log('tried to add to db');
        if (error) {
            console.log('error inserting problem ' + problem.question_id);
            console.log(error);
            failed_question_ids.push(problem.question_id);
        }
        console.log(data);
        console.log('added question id ' + problem.question_id);
        console.log(problem.skill);
        question_ids.push(problem.question_id);
        db_problems.push(db_problem);
    }
    return {db_problems, question_ids, failed_question_ids};
}



export default eventHandler(async (event) => {
    assertMethod(event, "POST");
    console.log('add problems from supabase pdf 5')
    const client = serverSupabaseServiceRole(event)
    const body = await readBody(event);
    const from_test = body.from_test;
    const file_path = body.file_path;
    const expected_problem_count = parseInt(body.problem_count);
    console.log(body);

    

    let sample_file_path = "cb-question-bank/early-nov-2024/math/ai-sample-math-problems.pdf"
    console.log(sample_file_path);
    const { data: sample_data, error: sample_error } = await client.storage.from('Problem PDFs').download(sample_file_path);
    console.log('got sample data')
    const sampleArrayBuffer = await sample_data.arrayBuffer();
    const samplePdfBase64 = Buffer.from(sampleArrayBuffer).toString('base64');
    console.log('sample pdf base64:')
    console.log(samplePdfBase64.slice(0, 100));

    const { data, error } = await client.storage.from('Problem PDFs').download(file_path);
    console.log('got pdf')
    const arrayBuffer = await data.arrayBuffer();
    const pdfBase64 = Buffer.from(arrayBuffer).toString('base64');
    console.log('got base64');
    console.log(pdfBase64.slice(0, 100));
    
    /*
    const buffer = Buffer.from(await data.arrayBuffer())
    console.log('got buffer');
    const pdfBase64 = buffer.toString('base64');
    */
    
    
    const anthropic = new Anthropic({apiKey: process.env.ANTHROPIC_API_KEY});
    console.log('formed anthropic client')
    const msg = await anthropic.beta.messages.create({
        model: 'claude-3-5-sonnet-latest', 
        betas: ["pdfs-2024-09-25"],
        max_tokens: 8000, 
        system: system_prompt,
        messages: [
            {role: 'user', content: [
                {
                    type: 'document',
                    source: {
                      media_type: 'application/pdf',
                      type: 'base64',
                      data: pdfBase64,
                    },
                },
                {"type": "text", "text": "Please format the attached pdf into the JSON array format described in the system prompt."}
            ]}

        ]
    });
    console.log('got anthropic response');
    console.log(msg);
    let problems = getProblemsFromAnthropicMsg(msg);
    console.log(problems.length);
    /*
    let resp_json = msg.content[0].text;
    resp_json = `${resp_json}`;
    let problems = null;
    try {
        problems = JSON.parse(resp_json);
        console.log('parsed problems')
        console.log(problems.length);
        for (let problem of problems) {
            console.log(problem.question_id);
        }
    } catch(err) {
        console.log('failed to parse original json, will try to reformat')
        let json_start = resp_json.indexOf("[");
        resp_json = resp_json.slice(json_start);
        let last_question_id_index = resp_json.lastIndexOf("question_id");
        resp_json = resp_json.slice(0, last_question_id_index);
        let last_curly_brace_close = resp_json.lastIndexOf("}");
        resp_json = resp_json.slice(0, last_curly_brace_close);
        resp_json += "]";
        problems = JSON.parse(resp_json);
        console.log('parsed json');
        console.log(problems.length);
    }
    */

    let { db_problems, question_ids, failed_question_ids } = await saveProblemsToDB(client, problems, {from_test: from_test});

    console.log('saved problems');
    console.log(db_problems.length);
    /*
    let db_problems = [];
    let question_ids = [];
    for (let problem of problems) {
        let db_problem = prepareProblemForDB(problem, {is_practice_test: from_test});
        const { data, error } = await client.from('sat_problems').insert(db_problem);
        if (error) {
            console.log('error inserting problem ' + problem.question_id);
            console.log(error);
        }
        question_ids.push(problem.question_id);
        db_problems.push(db_problem);
    }
    */
    
    let extra_attempts = 0;
    while (db_problems.length < expected_problem_count) {
        console.log('expected problem count does not match actual problem count')
        extra_attempts++;
        if (extra_attempts > 10) {
            console.log('Failed to add enough problems');
            break;
        }
        let last_question_id = question_ids[question_ids.length - 1];
        const msg = await anthropic.beta.messages.create({
            model: 'claude-3-5-sonnet-latest', 
            betas: ["pdfs-2024-09-25"],
            max_tokens: 8000, 
            system: system_prompt,
            messages: [
                {role: 'user', content: [
                    {
                        type: 'document',
                        source: {
                          media_type: 'application/pdf',
                          type: 'base64',
                          data: pdfBase64,
                        },
                    },
                    {"type": "text", "text": `Please format the attached pdf into the JSON array format described in the system prompt. Please skip over the first problems up to question id ${last_question_id}, starting with the first problem after ${last_question_id}`}
                ]}
    
            ]
        });
        problems = getProblemsFromAnthropicMsg(msg);
        let save_resp = await saveProblemsToDB(client, problems, {from_test: from_test});
        db_problems = db_problems.concat(save_resp.db_problems);
        question_ids = question_ids.concat(save_resp.question_ids);
        failed_question_ids = failed_question_ids.concat(save_resp.failed_question_ids);
    }
    return { status: 'OK', problems_processed: db_problems.length, failed_question_ids: failed_question_ids };
});